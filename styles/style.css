/* 
  Основные стили страницы
  Здесь используется CSS Grid и Flexbox для вёрстки
  Все цвета берутся из CSS переменных
*/

/* Базовые стили страницы */
.page {
  margin: 0 auto; /* Центрируем страницу по горизонтали */
  background-color: var(--bg-color); /* Фон из переменных */
  font-family: var(--main-font, 'IBM Plex mono', monospace); /* Шрифт с fallback */
  font-size: var(--main-font-size); /* Размер текста */
  color: var(--main-text-color); /* Цвет текста */
  line-height: var(--main-line-height); /* Межстрочный интервал */

  /* Фоновое изображение */
  background-image: var(--bg-image); /* Картинка фона из переменных */
  background-repeat: no-repeat; /* Не повторяем изображение */
  background-size: cover; /* Растягиваем на весь экран */
  background-position: center; /* Центрируем изображение */
  background-attachment: fixed; /* Фон фиксирован при скролле */
}

/* Шапка сайта */
.header {
  display: grid; /* Используем Grid для сложной сетки */
  grid-template-rows: 1fr min-content 1fr auto; /* 4 строки: пустое место, меню, заголовок, описание */
  align-items: center; /* Выравниваем по вертикали по центру */
  justify-items: end; /* Выравниваем по горизонтали вправо */
  padding: var(--main-padding); /* Отступы из переменных */
}

/* Общий стиль для шапки и подвала с декоративными уголками */
.decorated-zone {
  height: 100vh; /* Высота во весь экран */
  min-height: 668px; /* Минимальная высота для мобильных */
  position: relative; /* Для позиционирования псевдоэлементов */
}

/* Левый нижний уголок */
.decorated-zone::before {
  content: ""; /* Обязательно для псевдоэлемента */
  position: absolute; /* Абсолютное позиционирование */

  /* Позиция в левом нижнем углу */
  inset-inline-start: var(--main-padding); /* Отступ слева */
  inset-block-end: var(--main-padding); /* Отступ снизу */

  /* Размеры уголка */
  inline-size: 25px; /* Ширина */
  block-size: 25px; /* Высота */

  /* Границы - только левая и нижняя */
  border-block-end: 1px solid var(--button-color); /* Нижняя граница */
  border-inline-start: 1px solid var(--button-color); /* Левая граница */
}

/* Правый верхний уголок */
.decorated-zone::after {
  content: ""; /* Обязательно для псевдоэлемента */
  position: absolute; /* Абсолютное позиционирование */

  /* Позиция в правом верхнем углу */
  inset-inline-end: var(--main-padding); /* Отступ справа */
  inset-block-start: var(--main-padding); /* Отступ сверху */

  /* Размеры уголка */
  inline-size: 25px; /* Ширина */
  block-size: 25px; /* Высота */

  /* Границы - только правая и верхняя */
  border-block-start: 1px solid var(--button-color); /* Верхняя граница */
  border-inline-end: 1px solid var(--button-color); /* Правая граница */
}

/* Меню выбора темы */
.header__theme-menu {
  justify-self: end; /* Прижимаем меню к правому краю */
}

/* Список кнопок меню */
.header__theme-menu-list {
  display: flex; /* Горизонтальное расположение */
  flex-direction: column; /* Вертикальный стек кнопок */
  gap: 10px; /* Промежуток между кнопками */
}

/* Кнопки меню */
.header__theme-menu-button {
  color: var(--button-color); /* Цвет текста из переменных */
  padding: 1.5px 13px; /* Внутренние отступы */
  border: none; /* Убираем стандартную рамку */
  background-color: transparent; /* Прозрачный фон */
  cursor: pointer; /* Курсор-указатель при наведении */
}

/* Эффект при наведении на кнопку */
.header__theme-menu-button:hover {
  outline: 1px solid var(--button-hover-color); /* Полупрозрачная рамка */
}

/* Убираем outline при фокусе (будет свой стиль) */
.header__theme-menu-button:focus {
  outline: none; /* Отключаем стандартный outline */
}

/* Свой стиль для фокуса с клавиатуры */
.header__theme-menu-button:focus-visible {
  border-bottom: 1px solid var(--button-color); /* Подчёркивание снизу */
}

/* Активная кнопка меню */
.header__theme-menu-button_active {
  outline: 1px solid var(--button-color); /* Рамка вокруг активной кнопки */
  pointer-events: none; /* Отключаем клики по активной кнопке */
}

/* Общий стиль для заголовков h1 и h2 */
.title {
  color: var(--main-title-color); /* Цвет из переменных */
  font-size: clamp(7.25rem, 7.0115rem + 1.0178vw, 7.5rem); /* Адаптивный размер */
  line-height: 82.5%; /* Межстрочный интервал для заголовков */
  font-weight: 700; /* Жирное начертание */
}

/* Заголовок в шапке */
.header__title {
  text-shadow: 4px 4px 0 var(--accent-color); /* Тень смещённая на 4px */
}

/* Описание под заголовком в шапке */
.header__description {
  justify-self: end; /* Прижимаем к правому краю */
  align-self: center; /* Выравниваем по вертикали по центру */
  width: 100%; /* Занимает всю доступную ширину */
  color: var(--title-decor-color); /* Цвет текста */
  background-color: var(--title-decor-bg); /* Фон */
  font-size: var(--main-font-size); /* Размер текста */
  font-weight: 700; /* Жирное начертание */
  line-height: var(--main-line-height); /* Межстрочный интервал */
}

/* Метка REC в шапке */
.header__rec {
  position: absolute; /* Абсолютное позиционирование */
  color: var(--rec-color); /* Цвет из переменных */
  text-transform: uppercase; /* Все буквы заглавные */
  inset-block-start: var(--main-padding); /* Отступ сверху */
  inset-inline-end: calc(var(--main-padding) + 9px + 10px); /* Отступ справа с учётом кружка */
}

/* Кружок рядом с REC */
.header__rec::after {
  content: ""; /* Обязательно для псевдоэлемента */
  position: absolute; /* Абсолютное позиционирование */
  block-size: 9px; /* Высота кружка */
  inline-size: 9px; /* Ширина кружка */
  border-radius: 50%; /* Делаем круг */
  box-shadow: 0px 0px 4px 2px var(--rec-color); /* Свечение вокруг кружка */
  background-color: var(--rec-color); /* Заливка кружка */
  inset-inline-end: -19px; /* Позиция справа от текста */
  inset-block-start: 8px; /* Выравнивание по вертикали */
}

/* Основной контент между шапкой и подвалом */
.content {
  display: grid; /* Сетка для секций */
  gap: var(--sections-gap); /* Промежуток между секциями */
  padding: var(--main-content-vertical-padding) var(--main-padding); /* Отступы сверху/снизу и по бокам */
}

/* Общий стиль для всех секций */
.section {
  display: grid; /* Сетка внутри секции */
  grid-auto-flow: row; /* Элементы располагаются в строки */
  gap: var(--header-articles-gap); /* Промежуток между заголовком и контентом */
}

/* Заголовок секции (h2) */
.section__header {
  color: var(--accent-color); /* Акцентный цвет */
  font-size: var(--main-font-size); /* Размер текста */
  font-weight: 700; /* Жирное начертание */
  line-height: var(--main-line-height); /* Межстрочный интервал */
}

/* Контейнер для статей внутри секции */
.section__article-list {
  display: grid; /* Сетка для статей */
  gap: var(--articles-gap); /* Промежуток между статьями */
}

/* Отдельная статья */
.article {
  display: grid; /* Сетка внутри статьи */
  gap: 10px; /* Промежуток между заголовком и текстом */
  grid-template-rows: min-content auto; /* Две строки: заголовок по размеру, текст занимает остальное */
}

/* Заголовок статьи (h3, h4) */
.article__header {
  color: var(--title-decor-color); /* Цвет текста */
  background-color: var(--title-decor-bg); /* Фон */
  font-size: var(--main-font-size); /* Размер текста */
  font-weight: 700; /* Жирное начертание */
  line-height: var(--main-line-height); /* Межстрочный интервал */
}

/* Основной текст статьи */
.article__text {
  color: var(--main-text-color); /* Цвет текста */
  font-size: var(--main-font-size); /* Размер текста */
  line-height: var(--main-line-height); /* Межстрочный интервал */
  font-weight: 400; /* Обычное начертание */
}

/* Ссылки в тексте */
.article__text .research-link {
  text-decoration: none; /* Убираем подчёркивание */
  text-shadow: 2px 2px var(--accent-color); /* Тень вместо подчёркивания */
}

/* Эффект при наведении на ссылку */
.article__text .research-link:hover {
  outline: none; /* Убираем outline */
  border-bottom: 1px solid var(--main-text-color); /* Подчёркивание при наведении */
}

/* Убираем outline при фокусе */
.article__text .research-link:focus {
  outline: none; /* Отключаем стандартный outline */
}

/* Свой стиль для фокуса с клавиатуры */
.article__text .research-link:focus-visible {
  outline: 1px solid var(--main-text-color); /* Рамка вокруг ссылки */
}

/* Контейнер для изображений в галерее */
.article__images {
  display: grid; /* Сетка для изображений */
  gap: var(--main-padding); /* Промежуток между изображениями */
}

/* Отдельное изображение в галерее */
.article__images-image {
  width: 100%; /* Ширина 100% контейнера */
  height: 100%; /* Высота 100% контейнера */
  object-fit: cover; /* Обрезаем и масштабируем изображение */
  object-position: center; /* Центрируем изображение */
}

/* Подвал сайта */
.footer {
  display: flex; /* Flex для центрирования */
  justify-content: center; /* Центрируем по горизонтали */
  align-items: center; /* Центрируем по вертикали */
  padding: var(--main-padding); /* Отступы */
}

/* Заголовок в подвале */
.footer__title {
  text-shadow: 2px 2px 0 var(--accent-color); /* Тень смещённая на 2px */
}

/* 
  Стили для планшетов (ширина экрана >= 768px) 
  Переопределяют мобильные стили
*/
@media (width >= 768px) {
  /* Секции "Почему" и "Как" - две колонки */
  .why,
  .how {
    grid-template-columns: 1fr 2fr; /* Заголовок 1 часть, контент 2 части */
  }

  /* Секция "Что" - заголовок занимает 1/3 ширины */
  .what .section__header {
    width: calc(100% / 3 - var(--articles-gap)); /* Ширина с учётом промежутка */
  }

  /* Галерея - больше промежуток между изображениями */
  .images article {
    gap: 20px; /* Увеличиваем промежуток */
  }

  /* Заголовок в шапке смещаем влево */
  .header__title {
    justify-self: left; /* Выравниваем по левому краю */
    margin-inline-start: -20px; /* Смещаем влево за отступ */
  }

  /* Адаптивный размер заголовков для больших экранов */
  .title {
    font-size: clamp(7.5rem, 0.5625rem + 14.4531vw, 9.8125rem); /* Динамический размер */
  }

  /* Описание в шапке занимает половину ширины */
  .header__description {
    width: calc(100% / 2); /* 50% ширины */
  }

  /* Сетка для галереи изображений */
  .article__images {
    grid-template-columns: repeat(3, 1fr); /* 3 колонки */
    grid-template-rows: repeat(3, auto); /* 3 строки */
  }

  /* Первое изображение - на 2 колонки */
  .article__images-image:first-child {
    grid-column: span 2; /* Занимает 2 колонки */
  }

  /* Второе изображение - на 2 строки */
  .article__images-image:nth-child(2) {
    grid-row: span 2; /* Занимает 2 строки */
  }

  /* Третье изображение - на 2 строки */
  .article__images-image:nth-child(3) {
    grid-row: span 2; /* Занимает 2 строки */
  }

  /* Пятое изображение - на 2 колонки в третьей строке */
  .article__images-image:nth-child(5) {
    grid-row: 3; /* Третья строка */
    grid-column: 2 / 4; /* С 2 по 4 колонку */
  }
}

/* 
  Стили для компьютеров (ширина экрана >= 1024px) 
  Дополняют планшетные стили
*/
@media (width >= 1024px) {
  /* Секция "Что" - 3 колонки для статей */
  .what .section__article-list {
    grid-template-columns: repeat(3, 1fr); /* 3 равные колонки */
  }

  /* Секции "Почему" и "Как" - точное соотношение колонок */
  .why,
  .how {
    grid-template-columns: calc((100% - 2 * var(--header-articles-gap)) / 3) 1fr; /* 1/3 и 2/3 с учётом промежутка */
  }

  /* Меню в шапке центрируем */
  .header__theme-menu {
    justify-self: center; /* Центрируем по горизонтали */
    align-self: start; /* Прижимаем к верху */
  }

  /* Кнопки меню в строку */
  .header__theme-menu-list {
    flex-direction: row; /* Горизонтальное расположение */
  }
}
